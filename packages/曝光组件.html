<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>曝光加载</title>
    <style>
    ul,li{
      list-style:none;
    }
    .container{
      max-width: 800px;
      margin: 0 auto;
    }
    .container:after{
      content: '';
      display: block;
      clear: both;
    }
    .container li{
      float: left;
      margin: 10px 10px;
    }
    .container li img{
      width: 380px;
      height: 380px;
    }
    p{
      float: left;
    }
  </style>
</head>
<body>
  <ul class="container">
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/17.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/18.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/19.jpg" /></a></li>
    <li><a href="#"><img src="" data-src="http://cdn.jirengu.com/book.jirengu.com/img/20.jpg" /></a></li>
    <p id="hello">hello</p>
  </ul>
  <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>
    function Exposure($target, callback){
      this.$target = $target
      this.callback = callback
      this.bind()
      this.check()
    }

    Exposure.prototype = {
      bind: function(){
        var _this = this
        $(window).scroll(function(){
          _this.check()
        })
      },

      check: function(){
        if (this.isShow(this.$target)) {
          this.callback(this.$target)
        }
      },

      isShow: function(){
        var winHeight = $(window).height()
        var scrollTop = $(window).scrollTop()
        var offsetTop = this.$target.offset().top
        if (offsetTop > scrollTop && offsetTop < scrollTop + winHeight) {
          return true
        }else{
          return false
        }
      }
    }

    new Exposure($('#hello'), function($node){
      $node.text($node.text() + $node.text())
    })
    $('.container img').each(function(idx, img){
      new Exposure($(img), function($img){
        showImg($img)
      })
    })

    function showImg($img){
      $img.attr('src',$img.attr('data-src'))
    }













    // function lazyLoad(){
    //   $('.container>li>a>img').each(function(){
    //     if (check($(this)) && !isLoaded($(this))) {
    //       isShow($(this))
    //     }
    //   })
    // }

    // function check($img){


    // function isLoaded($img){
    //   return $img.attr('src') === $img.attr('data-src')
    // }

    // function isShow($img){
    //   $img.attr('src',$img.attr('data-src'))
    // }




  </script>
</body>
</html>
